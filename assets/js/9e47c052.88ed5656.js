"use strict";(self.webpackChunktech_docs=self.webpackChunktech_docs||[]).push([[4378],{2076:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/k8s_env_1-91d69cee8b9f80a0cff6091dbf2cb753.png"},8412:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"tech/devops/Section 2/slide7","title":"K8\'s Env","description":"1. In any application, we have certain configuration values that are required for the application to run.","source":"@site/docs/tech/devops/Section 2/slide7.md","sourceDirName":"tech/devops/Section 2","slug":"/tech/devops/Section 2/slide7","permalink":"/tech-docs/docs/tech/devops/Section 2/slide7","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tech/devops/Section 2/slide7.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"sidebar_label":"K8\'s Env & Config Maps"},"sidebar":"techDocsSidebar","previous":{"title":"Practice Time","permalink":"/tech-docs/docs/tech/devops/Section 2/slide6"},"next":{"title":"slide1","permalink":"/tech-docs/docs/tech/devops/Section 3/slide1"}}');var a=s(4848),r=s(8453);const t={sidebar_position:7,sidebar_label:"K8's Env & Config Maps"},c="K8's Env",o={},l=[{value:"Practice Time - Env Variables",id:"practice-time---env-variables",level:2},{value:"K8&#39;s Config Maps",id:"k8s-config-maps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"k8s-env",children:"K8's Env"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"In any application, we have certain configuration values that are required for the application to run."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"These configuration values are generally passed as environment variables."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["In K8's, we can pass environment variables to our pods using the ",(0,a.jsx)(n.code,{children:"env"})," field in the pod specification."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["In the case of ",(0,a.jsx)(n.code,{children:"deployment"})," we can pass environment variables in the same way as we do in pods."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n    name: node-app\r\n    labels:\r\n        app: node-app\r\nspec:\r\n    replicas: 3\r\n    selector:\r\n        matchLabels:\r\n            app: node-app\r\n    template:\r\n        metadata:\r\n            labels:\r\n                app: node-app\r\n        spec:\r\n            containers:\r\n                - image: sathish1996/node-app:1.1.1\r\n                  name: node-app\r\n                  ports:\r\n                    - containerPort: 4000\r\n                  env:\r\n                    - name: APP_NAME\r\n                      value: "I am awesome node app"\r\n                    - name: LOG_LEVEL\r\n                      value: "DEBUG"\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"practice-time---env-variables",children:"Practice Time - Env Variables"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["You can edit the python app or node js app from previous practice to read the environment variable ",(0,a.jsx)(n.code,{children:"APP_NAME"})," and return it in the response."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Rebuild the docker image and push it to docker hub."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Update the deployment yaml file to include the env variable as shown above."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Apply the deployment using the below command"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:" kubectl apply -f deployment.yaml\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Verify the pods are recreated using the below command"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:" kubectl get pods\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Access the application using the service & minikube service URL & verify the response contains the environment variable value."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Tip: To debug the environment variables in the pod, you can exec into the pod and run the ",(0,a.jsx)(n.code,{children:"printenv"})," command."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:" kubectl exec -it <pod-name> -- sh\r\n printenv\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:" minikube kubectl -- exec -it <pod-name> -- sh\r\n printenv\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"k8s_env_1",src:s(2076).A+"",width:"884",height:"321"})}),"\n",(0,a.jsx)(n.h2,{id:"k8s-config-maps",children:"K8's Config Maps"})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(6540);const a={},r=i.createContext(a);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);